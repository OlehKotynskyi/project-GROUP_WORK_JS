{"version":3,"file":"commonHelpers.js","sources":["../src/js/cart.js","../src/cart-page.js"],"sourcesContent":["import { createMarkupCart } from './template.js'\nimport addCounter from './cart-header-counter';\nconst title = document.querySelector('.products-quantity-title')\nconst totalPrice = document.querySelector('.products-total-price')\nconst containerCart = document.querySelector('.cart-container')\nconst cartWrapper = document.querySelector('.cart-desktop-wrapper')\nconst emptyCart = document.querySelector('.cart-empty')\nconst deleteAllBtn = document.querySelector('.del-all-btn')\nconst KEY = 'products in cart'\n\nrenderCart();\n\n// очистка всієї корзини (localStorage)\ndeleteAllBtn.addEventListener('click', clearCart)\nfunction clearCart() {\n    localStorage.removeItem(KEY)\n    renderCart();\n}\n\n// якщо localStorage пустий, показувати розмітку пустої корзини\n// і приховувати розмітку товарів.\n// Викликається в cart.page.js\nexport function renderCart() {\n    addCounter();\n    const products = JSON.parse(localStorage.getItem(KEY))\n    \n    if (products === null || products === undefined || products.length === 0) {\n        cartWrapper.style.display = 'none';\n        emptyCart.style.display = 'block';\n        containerCart.innerHTML = '';\n        title.textContent = 'Cart (0)'\n        totalPrice.textContent = '$0';\n    } else {\n        containerCart.innerHTML = '';\n        cartWrapper.style.display = 'flex';\n        emptyCart.style.display = 'none';\n\n        containerCart.insertAdjacentHTML('beforeend', createMarkupCart(products))\n        const productsQuantity = document.querySelectorAll('.products-quantity')\n    \n        products.forEach((el, index) => {\n            productsQuantity[index].textContent = el.quantity\n        })\n\n        countTotal(products);\n    }\n}\n\n// додавання, віднімання продуктів\n// const moreBtn = document.querySelectorAll('.more-btn')\n// const lessBtn = document.querySelectorAll('.less-btn')\n\n// видалення конкретного продукту\n// можна оптимізувати\ncontainerCart.addEventListener('click', removeProduct)\nfunction removeProduct(event) {\n    if (event.target.className !== 'remove-btn') {\n        return;\n    }\n\n    const selectedItem = event.target.closest('.cart-list-item');\n    const selectedItemId = selectedItem.id;\n    const products = JSON.parse(localStorage.getItem(KEY));\n    const index = products.findIndex(item => item._id === selectedItemId);\n    \n    products.splice(index, 1);\n    localStorage.setItem(KEY, JSON.stringify(products));\n    selectedItem.remove();\n    addCounter();\n    \n    countTotal(products);\n\n    if (products === null || products === undefined || products.length === 0) {\n        renderCart();\n        return;\n    }\n}\n\n// обрахунок суми кошика\nfunction countTotal(obj) {\n    title.textContent = `Cart (${obj.length})`\n    const total = obj.reduce((acc, {quantity, price}) => {\n        return acc += quantity * price\n    }, 0)\n    totalPrice.textContent = `$${total.toFixed(2)}`\n}","import { handleHeaderScroll } from './js/base-js/scroll';\nhandleHeaderScroll();"],"names":["title","totalPrice","containerCart","cartWrapper","emptyCart","deleteAllBtn","KEY","renderCart","clearCart","addCounter","products","createMarkupCart","productsQuantity","el","index","countTotal","removeProduct","event","selectedItem","selectedItemId","item","obj","total","acc","quantity","price","handleHeaderScroll"],"mappings":"8DAEA,MAAMA,EAAQ,SAAS,cAAc,0BAA0B,EACzDC,EAAa,SAAS,cAAc,uBAAuB,EAC3DC,EAAgB,SAAS,cAAc,iBAAiB,EACxDC,EAAc,SAAS,cAAc,uBAAuB,EAC5DC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAe,SAAS,cAAc,cAAc,EACpDC,EAAM,mBAEZC,IAGAF,EAAa,iBAAiB,QAASG,CAAS,EAChD,SAASA,GAAY,CACjB,aAAa,WAAWF,CAAG,EAC3BC,GACJ,CAKO,SAASA,GAAa,CACzBE,IACA,MAAMC,EAAW,KAAK,MAAM,aAAa,QAAQJ,CAAG,CAAC,EAErD,GAAII,GAAa,MAAkCA,EAAS,SAAW,EACnEP,EAAY,MAAM,QAAU,OAC5BC,EAAU,MAAM,QAAU,QAC1BF,EAAc,UAAY,GAC1BF,EAAM,YAAc,WACpBC,EAAW,YAAc,SACtB,CACHC,EAAc,UAAY,GAC1BC,EAAY,MAAM,QAAU,OAC5BC,EAAU,MAAM,QAAU,OAE1BF,EAAc,mBAAmB,YAAaS,EAAiBD,CAAQ,CAAC,EACxE,MAAME,EAAmB,SAAS,iBAAiB,oBAAoB,EAEvEF,EAAS,QAAQ,CAACG,EAAIC,IAAU,CAC5BF,EAAiBE,GAAO,YAAcD,EAAG,QACrD,CAAS,EAEDE,EAAWL,CAAQ,CACtB,CACL,CAQAR,EAAc,iBAAiB,QAASc,CAAa,EACrD,SAASA,EAAcC,EAAO,CAC1B,GAAIA,EAAM,OAAO,YAAc,aAC3B,OAGJ,MAAMC,EAAeD,EAAM,OAAO,QAAQ,iBAAiB,EACrDE,EAAiBD,EAAa,GAC9BR,EAAW,KAAK,MAAM,aAAa,QAAQJ,CAAG,CAAC,EAC/CQ,EAAQJ,EAAS,UAAUU,GAAQA,EAAK,MAAQD,CAAc,EASpE,GAPAT,EAAS,OAAOI,EAAO,CAAC,EACxB,aAAa,QAAQR,EAAK,KAAK,UAAUI,CAAQ,CAAC,EAClDQ,EAAa,OAAM,EACnBT,IAEAM,EAAWL,CAAQ,EAEfA,GAAa,MAAkCA,EAAS,SAAW,EAAG,CACtEH,IACA,MACH,CACL,CAGA,SAASQ,EAAWM,EAAK,CACrBrB,EAAM,YAAc,SAASqB,EAAI,UACjC,MAAMC,EAAQD,EAAI,OAAO,CAACE,EAAK,CAAC,SAAAC,EAAU,MAAAC,CAAK,IACpCF,GAAOC,EAAWC,EAC1B,CAAC,EACJxB,EAAW,YAAc,IAAIqB,EAAM,QAAQ,CAAC,GAChD,CCpFAI,EAAoB"}