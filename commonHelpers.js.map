{"version":3,"file":"commonHelpers.js","sources":["../src/js/cart.js","../src/cart-page.js"],"sourcesContent":["import { createMarkupCart } from './template.js';\nimport addCounter from './cart-header-counter';\nconst title = document.querySelector('.products-quantity-title');\nconst totalPrice = document.querySelector('.products-total-price');\nconst containerCart = document.querySelector('.cart-container');\nconst cartWrapper = document.querySelector('.cart-desktop-wrapper');\nconst emptyCart = document.querySelector('.cart-empty');\nconst deleteAllBtn = document.querySelector('.del-all-btn');\nconst KEY = 'products in cart';\n\nconst formEmailRet = document.querySelector('.form-checkout');\nconst formInputRet = document.getElementById('.inputEmail');\nconst btnSumbit = document.querySelector('.btnCheckout');\n\nrenderCart();\n\n// очистка всієї корзини (localStorage)\ndeleteAllBtn.addEventListener('click', clearCart);\nfunction clearCart() {\n  localStorage.removeItem(KEY);\n  renderCart();\n}\n\n// якщо localStorage пустий, показувати розмітку пустої корзини\n// і приховувати розмітку товарів.\n// Викликається в cart.page.js\nexport function renderCart() {\n  addCounter();\n  const products = JSON.parse(localStorage.getItem(KEY));\n\n  if (products === null || products === undefined || products.length === 0) {\n    cartWrapper.style.display = 'none';\n    emptyCart.style.display = 'block';\n    containerCart.innerHTML = '';\n    title.textContent = 'Cart (0)';\n    totalPrice.textContent = '$0';\n  } else {\n    containerCart.innerHTML = '';\n    // cartWrapper.style.display = 'flex';\n    emptyCart.style.display = 'none';\n\n    containerCart.insertAdjacentHTML('beforeend', createMarkupCart(products));\n    const productsQuantity = document.querySelectorAll('.products-quantity');\n\n    products.forEach((el, index) => {\n      productsQuantity[index].textContent = el.quantity;\n    });\n\n    countTotal(products);\n  }\n}\n\n// додавання, віднімання продуктів\n// const moreBtn = document.querySelectorAll('.more-btn')\n// const lessBtn = document.querySelectorAll('.less-btn')\n// const numberValue = document.querySelector('.products-quantity')\n \n\n\n// видалення конкретного продукту\n// можна оптимізувати\ncontainerCart.addEventListener('click', removeProduct);\nfunction removeProduct(event) {\n  if (event.target.className !== 'remove-btn') {\n    return;\n  }\n\n  const selectedItem = event.target.closest('.cart-list-item');\n  const selectedItemId = selectedItem.id;\n  const products = JSON.parse(localStorage.getItem(KEY));\n  const index = products.findIndex(item => item._id === selectedItemId);\n\n  products.splice(index, 1);\n  localStorage.setItem(KEY, JSON.stringify(products));\n  selectedItem.remove();\n  addCounter();\n\n  countTotal(products);\n\n  if (products === null || products === undefined || products.length === 0) {\n    renderCart();\n    return;\n  }\n}\n\n// обрахунок суми кошика\nfunction countTotal(obj) {\n  title.textContent = `Cart (${obj.length})`;\n  const total = obj.reduce((acc, { quantity, price }) => {\n    return (acc += quantity * price);\n  }, 0);\n  totalPrice.textContent = `$${total.toFixed(2)}`;\n}\n\n//email and checkout\nformEmailRet.addEventListener('sumbit', function (evt) {\n  if (!formEmailRet.value) {\n    alert('Please enter a valid email');\n  \n    //return;\n  }\n});\n// document\n//   .getElementById('subscribeFormEm')\n//   .addEventListener('submit', function (event) {\n//     event.preventDefault();\n\n//     var emailInput = document.getElementById('form');\n//     var email = emailInput.value;\n// console.log(email)\n//     if (!validateEmail(email)) {\n//       alert('Please enter a valid email address');\n//       return;\n//     }\n\n//     // Відправляємо дані на сервер за допомогою fetch\n//     fetch('', {\n//       method: 'POST',\n//       headers: {\n//         'Content-Type': 'application/json',\n//       },\n//       body: JSON.stringify({ email: email }),\n//     })\n//       .then(response => {\n//         if (!response.ok) {\n//           throw new Error('Network response was not ok');\n//         }\n//         console.log('Data sent successfully');\n//         // Очищаємо поле введення після успішної відправки\n//         emailInput.value = '';\n//       })\n//       .catch(error => {\n//         console.error('There was a problem with the fetch operation:', error);\n//       });\n//   });\n\n// // Функція для перевірки коректності введеної електронної пошти\n// function validateEmail(email) {\n//   var emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/;\n//   return emailRegex.test(email);\n// }\n","import { handleHeaderScroll } from './js/base-js/scroll';\nhandleHeaderScroll();"],"names":["title","totalPrice","containerCart","cartWrapper","emptyCart","deleteAllBtn","KEY","formEmailRet","renderCart","clearCart","addCounter","products","createMarkupCart","productsQuantity","el","index","countTotal","removeProduct","event","selectedItem","selectedItemId","item","obj","total","acc","quantity","price","evt","handleHeaderScroll"],"mappings":"8DAEA,MAAMA,EAAQ,SAAS,cAAc,0BAA0B,EACzDC,EAAa,SAAS,cAAc,uBAAuB,EAC3DC,EAAgB,SAAS,cAAc,iBAAiB,EACxDC,EAAc,SAAS,cAAc,uBAAuB,EAC5DC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAe,SAAS,cAAc,cAAc,EACpDC,EAAM,mBAENC,EAAe,SAAS,cAAc,gBAAgB,EACvC,SAAS,eAAe,aAAa,EACxC,SAAS,cAAc,cAAc,EAEvDC,IAGAH,EAAa,iBAAiB,QAASI,CAAS,EAChD,SAASA,GAAY,CACnB,aAAa,WAAWH,CAAG,EAC3BE,GACF,CAKO,SAASA,GAAa,CAC3BE,IACA,MAAMC,EAAW,KAAK,MAAM,aAAa,QAAQL,CAAG,CAAC,EAErD,GAAIK,GAAa,MAAkCA,EAAS,SAAW,EACrER,EAAY,MAAM,QAAU,OAC5BC,EAAU,MAAM,QAAU,QAC1BF,EAAc,UAAY,GAC1BF,EAAM,YAAc,WACpBC,EAAW,YAAc,SACpB,CACLC,EAAc,UAAY,GAE1BE,EAAU,MAAM,QAAU,OAE1BF,EAAc,mBAAmB,YAAaU,EAAiBD,CAAQ,CAAC,EACxE,MAAME,EAAmB,SAAS,iBAAiB,oBAAoB,EAEvEF,EAAS,QAAQ,CAACG,EAAIC,IAAU,CAC9BF,EAAiBE,GAAO,YAAcD,EAAG,QAC/C,CAAK,EAEDE,EAAWL,CAAQ,CACpB,CACH,CAWAT,EAAc,iBAAiB,QAASe,CAAa,EACrD,SAASA,EAAcC,EAAO,CAC5B,GAAIA,EAAM,OAAO,YAAc,aAC7B,OAGF,MAAMC,EAAeD,EAAM,OAAO,QAAQ,iBAAiB,EACrDE,EAAiBD,EAAa,GAC9BR,EAAW,KAAK,MAAM,aAAa,QAAQL,CAAG,CAAC,EAC/CS,EAAQJ,EAAS,UAAUU,GAAQA,EAAK,MAAQD,CAAc,EASpE,GAPAT,EAAS,OAAOI,EAAO,CAAC,EACxB,aAAa,QAAQT,EAAK,KAAK,UAAUK,CAAQ,CAAC,EAClDQ,EAAa,OAAM,EACnBT,IAEAM,EAAWL,CAAQ,EAEfA,GAAa,MAAkCA,EAAS,SAAW,EAAG,CACxEH,IACA,MACD,CACH,CAGA,SAASQ,EAAWM,EAAK,CACvBtB,EAAM,YAAc,SAASsB,EAAI,UACjC,MAAMC,EAAQD,EAAI,OAAO,CAACE,EAAK,CAAE,SAAAC,EAAU,MAAAC,KACjCF,GAAOC,EAAWC,EACzB,CAAC,EACJzB,EAAW,YAAc,IAAIsB,EAAM,QAAQ,CAAC,GAC9C,CAGAhB,EAAa,iBAAiB,SAAU,SAAUoB,EAAK,CAChDpB,EAAa,OAChB,MAAM,4BAA4B,CAItC,CAAC,ECpGDqB,EAAoB"}