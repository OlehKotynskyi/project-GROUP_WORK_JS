import{a as p,c as I,h}from"./assets/scroll-145a9266.js";import"./assets/vendor-4b9aba64.js";const g=document.querySelector(".products-quantity-title"),f=document.querySelector(".products-total-price"),s=document.querySelector(".cart-container"),C=document.querySelector(".cart-desktop-wrapper"),m=document.querySelector(".cart-empty"),N=document.querySelector(".del-all-wrapper"),o="products in cart",y=document.querySelector(".form-checkout");document.getElementById(".inputEmail");document.querySelector(".btnCheckout");u();N.addEventListener("click",S);function S(){localStorage.removeItem(o),u()}function u(){p();const t=JSON.parse(localStorage.getItem(o));if(t==null||t.length===0)C.style.display="none",m.style.display="block",s.innerHTML="",g.textContent="Cart (0)",f.textContent="$0";else{s.innerHTML="",m.style.display="none",s.insertAdjacentHTML("beforeend",I(t));const r=document.querySelectorAll(".products-quantity");t.forEach((a,e)=>{r[e].textContent=a.quantity}),l(t)}}s.addEventListener("click",b);function b(t){if(t.target.className!=="remove-btn"&&t.target.className!=="remove-btn-img")return;const r=t.target.closest(".cart-list-item"),a=r.id,e=JSON.parse(localStorage.getItem(o)),n=e.findIndex(c=>c._id===a);if(e.splice(n,1),localStorage.setItem(o,JSON.stringify(e)),r.remove(),p(),l(e),e==null||e.length===0){u();return}}s.addEventListener("click",k);function k(t){if(t.target.className!=="more-btn-img"&&t.target.className!=="less-btn"&&t.target.className!=="more-btn-card"&&t.target.className!=="less-btn-img")return;const r=t.target.closest(".cart-list-item"),a=r.id,e=JSON.parse(localStorage.getItem(o)),n=e.findIndex(q=>q._id===a),c=r.querySelector(".products-quantity");if((t.target.className==="more-btn-card"||t.target.className==="more-btn-img")&&(e[n].quantity++,c.innerHTML=e[n].quantity,localStorage.setItem(o,JSON.stringify(e)),l(e)),t.target.className==="less-btn"||t.target.className==="less-btn-img"){if(e[n].quantity===1)return;e[n].quantity--,c.innerHTML=e[n].quantity,localStorage.setItem(o,JSON.stringify(e)),l(e)}}function l(t){g.textContent=`Cart (${t.length})`;const r=t.reduce((a,{quantity:e,price:n})=>a+=e*n,0);f.textContent=`$${r.toFixed(2)}`}y.addEventListener("sumbit",function(t){y.value||alert("Please enter a valid email")});document.querySelector(".btnCheckout");const d=document.querySelector(".modal"),E=document.querySelector("#formEmailOrder"),i=document.querySelector("#formInputOrder");E.addEventListener("submit",x);i.addEventListener("keyup",L);function x(t){t.preventDefault();const r=i.value.trim();if(JSON.parse(localStorage.getItem(o)).reduce((n,{quantity:c})=>n+=c,0)===0){alert("You must add products' quantity!");return}if(!v(r)){alert("Please enter a valid email address");return}if(r===""){alert("Please enter an email address");return}T({email:r}).then(()=>{console.log("Data sent successfully"),i.value="",S(),d.style.display="block"}).catch(n=>{console.error("There was a problem with the fetchoperation:",n)})}var O=document.getElementsByClassName("close")[0];O.onclick=function(){d.style.display="none"};window.onclick=function(t){t.currentTarget.className!=="modal"&&(d.style.display="none")};function v(t){return/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t)}function L(t){t.key==="Enter"&&handleFormSubmit(t)}function T(t){return new Promise((r,a)=>{setTimeout(()=>{console.log("Imitating sending data to server:",t),r()},2e3)})}h();
//# sourceMappingURL=commonHelpers.js.map
