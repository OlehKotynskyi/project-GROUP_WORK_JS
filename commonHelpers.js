import{a as d,c as I,h}from"./assets/scroll-769d916c.js";import"./assets/vendor-4b9aba64.js";const p=document.querySelector(".products-quantity-title"),f=document.querySelector(".products-total-price"),s=document.querySelector(".cart-container"),N=document.querySelector(".cart-desktop-wrapper"),y=document.querySelector(".cart-empty"),C=document.querySelector(".del-all-wrapper"),o="products in cart",g=document.querySelector(".form-checkout");document.getElementById(".inputEmail");document.querySelector(".btnCheckout");i();C.addEventListener("click",S);function S(){localStorage.removeItem(o),i()}function i(){d();const e=JSON.parse(localStorage.getItem(o));if(e==null||e.length===0)N.style.display="none",y.style.display="block",s.innerHTML="",p.textContent="Cart (0)",f.textContent="$0";else{s.innerHTML="",y.style.display="none",s.insertAdjacentHTML("beforeend",I(e));const r=document.querySelectorAll(".products-quantity");e.forEach((a,t)=>{r[t].textContent=a.quantity}),l(e)}}s.addEventListener("click",b);function b(e){if(e.target.className!=="remove-btn"&&e.target.className!=="remove-btn-img")return;const r=e.target.closest(".cart-list-item"),a=r.id,t=JSON.parse(localStorage.getItem(o)),n=t.findIndex(c=>c._id===a);if(t.splice(n,1),localStorage.setItem(o,JSON.stringify(t)),r.remove(),d(),l(t),t==null||t.length===0){i();return}}s.addEventListener("click",k);function k(e){if(e.target.className!=="more-btn-img"&&e.target.className!=="less-btn"&&e.target.className!=="more-btn-card"&&e.target.className!=="less-btn-img")return;const r=e.target.closest(".cart-list-item"),a=r.id,t=JSON.parse(localStorage.getItem(o)),n=t.findIndex(q=>q._id===a),c=r.querySelector(".products-quantity");if((e.target.className==="more-btn-card"||e.target.className==="more-btn-img")&&(t[n].quantity++,c.innerHTML=t[n].quantity,localStorage.setItem(o,JSON.stringify(t)),l(t)),e.target.className==="less-btn"||e.target.className==="less-btn-img"){if(t[n].quantity===0){t.splice(n,1),r.remove(),localStorage.setItem(o,JSON.stringify(t)),d(),l(t),(t==null||t.length===0)&&i();return}t[n].quantity--,c.innerHTML=t[n].quantity,localStorage.setItem(o,JSON.stringify(t)),l(t)}}function l(e){p.textContent=`Cart (${e.length})`;const r=e.reduce((a,{quantity:t,price:n})=>a+=t*n,0);f.textContent=`$${r.toFixed(2)}`}g.addEventListener("sumbit",function(e){g.value||alert("Please enter a valid email")});document.querySelector(".btnCheckout");const m=document.querySelector(".modal"),E=document.querySelector("#formEmailOrder"),u=document.querySelector("#formInputOrder");E.addEventListener("submit",O);u.addEventListener("keyup",L);function O(e){e.preventDefault();const r=u.value.trim();if(JSON.parse(localStorage.getItem(o)).reduce((n,{quantity:c})=>n+=c,0)===0){alert("You must add products' quantity!");return}if(!x(r)){alert("Please enter a valid email address");return}if(r===""){alert("Please enter an email address");return}T({email:r}).then(()=>{console.log("Data sent successfully"),u.value="",S(),m.style.display="block"}).catch(n=>{console.error("There was a problem with the fetchoperation:",n)})}var v=document.getElementsByClassName("close")[0];v.onclick=function(){m.style.display="none"};window.onclick=function(e){e.currentTarget.className!=="modal"&&(m.style.display="none")};function x(e){return/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e)}function L(e){e.key==="Enter"&&handleFormSubmit(e)}function T(e){return new Promise((r,a)=>{setTimeout(()=>{console.log("Imitating sending data to server:",e),r()},2e3)})}h();
//# sourceMappingURL=commonHelpers.js.map
