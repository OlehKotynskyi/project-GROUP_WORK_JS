import{b as I,a as w,d as D,e as J,h as _}from"./assets/scroll-03c4f693.js";import{P as F,a as P}from"./assets/vendor-b592f4c5.js";const v=document.getElementById("pagination");let S=0;const R=window.innerWidth;R<768?S=2:S=4;function W(e,t,n){const o={totalItems:e.totalPages*t,itemsPerPage:t,visiblePages:S,page:n,centerAlign:!1,template:{page:'<a href="#" class="tui-page-btn">{{page}}</a>',currentPage:'<strong class="tui-page-btn tui-is-selected">{{page}}</strong>',moveButton:'<a href="#" class="tui-page-btn tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></a>',disabledMoveButton:'<span class="tui-page-btn tui-is-disabled tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></span>',moreButton:'<a href="#" class="tui-page-btn tui-is-disabled tui-{{type}}-is-ellip"><span class="tui-ico-ellip">...</span></a>'}};new F(v,o).on("afterMove",r=>{const c=r.page;var L=JSON.parse(localStorage.getItem("filters"))||{};L.page=c,localStorage.setItem("filters",JSON.stringify(L)),i()})}function U(){v.innerHTML=""}async function E(e,t,n,o,s){try{const r={keyword:t||"",category:e||"",page:n||1,limit:o||6};s&&(r.sort=s);const c=await P({method:"get",url:"https://food-boutique.b.goit.study/api/products",params:r});return c.data.totalPages>1?W(c.data,o,n):U(),c.data.results}catch(r){return console.error("Error fetching products:",r),[]}}async function g(e){return(await P(`https://food-boutique.b.goit.study/api/products/${e}`)).data}const j="/project-GROUP_WORK_JS/assets/check-267a6277.svg",q=document.querySelector(".products-container"),N=document.querySelector(".popular-container"),T=document.querySelector(".discount-container"),d="products in cart";function b(e){const t=document.querySelector(".products-container");!e||e.length===0?t.innerHTML=`<div class="cart-empty">
           <h3 class="products-titel">Nothing was found for the selected <span>filters...</span></h3>
           <p>Try adjusting your search parameters or browse our range by other criteria to find the perfect product for you.</p>
       </div>`:t.innerHTML=I(e)}function $(){const e=window.innerWidth;return e<375?6:e>=375&&e<768?8:9}K();function z(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}}async function G(){try{const e=await g("popular"),t=O(e),n=M(t,5);N.innerHTML=D(n)}catch(e){console.log(e.message)}}G();async function K(){try{const e=await E("Fresh_Produce");q.insertAdjacentHTML("beforeend",I(O(e))),w(),console.log(e)}catch(e){console.log(e.message)}}function M(e,t){return z(e),e.slice(0,t)}async function V(){try{const e=await g("discount"),t=M(e,2);T.innerHTML=J(t)}catch(e){console.log(e.message)}}T.addEventListener("click",Y);async function Y(e){if(e.target.nodeName==="BUTTON"||e.target.nodeName==="SPAN"||e.target.className==="discount-basket-icon"){const t=e.target.closest(".discount-list-item"),n=t.id;try{const o=await g(n),s=JSON.parse(localStorage.getItem(d))??[],r=s.findIndex(c=>c._id===n);if(r!==-1)s[r].quantity+=1;else{o.quantity=0,s.push(o);const c=t.querySelector("button");c.disabled=!0,c.innerHTML=`<span class="icon-styles">
                     <img class="discount-basket-icon" src="${j}" alt="icon bascket" width="18" height="18">
                  </span>`,c.classList.add("disabled")}localStorage.setItem(d,JSON.stringify(s)),w()}catch(o){console.log(o.message)}}}V();q.addEventListener("click",Q);async function Q(e){if(e.target.nodeName==="BUTTON"||e.target.className==="add-btn"||e.target.nodeName==="IMG"){const n=e.target.closest(".list-item").id;try{const o=await g(n),s=JSON.parse(localStorage.getItem(d))??[],r=s.findIndex(c=>c._id===n);r!==-1?s[r].quantity+=1:(o.quantity=1,s.push(o))}catch{console.error()}}}N.addEventListener("click",X);async function X(e){if(e.target.nodeName==="BUTTON"||e.target.nodeName==="svg"||e.target.nodeName==="use"){const t=e.target.closest(".product-popular-card"),n=t.id;try{const o=await g(n),s=JSON.parse(localStorage.getItem(d))??[],r=s.findIndex(c=>c._id===n);if(r!==-1)s[r].quantity+=1;else{o.quantity=0,s.push(o);const c=t.querySelector("button");c.disabled=!0,c.innerHTML=`<svg class="popular-basket-svg" width="12" height="12">
         <use href="../img/sprite.svg#icon-check"></use>
         </svg>`}localStorage.setItem(d,JSON.stringify(s)),w()}catch(o){console.log(o.message)}}}function O(e){return e.map(t=>{let n=t.category;return typeof n=="string"&&(n=n.split("_").join(" ")),{...t,category:n}})}document.addEventListener("DOMContentLoaded",function(){ne(),Z(),te(),oe()});window.addEventListener("resize",()=>{i()});async function Z(){try{const t=await(await fetch("https://food-boutique.b.goit.study/api/products/categories")).json();ee(t)}catch(e){console.error("Error fetching categories:",e)}}function ee(e){const t=document.getElementById("categories");t.innerHTML="",t.appendChild(new Option("Show all","")),e.forEach(n=>{t.appendChild(new Option(n.replace(/_/g," "),n))}),new SlimSelect({select:"#categories"})}function te(){const e=document.querySelector(".search-form"),t=document.getElementById("categories");e.addEventListener("submit",function(n){n.preventDefault();const o=document.getElementById("search-box").value;o==""?(a("keyword",null),i(),a("page",1)):(a("keyword",o),i(),a("page",1))}),t.addEventListener("change",function(){this.value=="Show all"?(a("category",null),a("page",1),i()):(a("category",this.value),a("page",1),i())})}async function i(){const e=C(),t=$();try{const n=await E(e.category,e.keyword,e.page,t);b(n)}catch(n){console.error("Error fetching products:",n),b([])}}function ne(){localStorage.getItem("filters")||x()}function a(e,t){const n=C();n[e]=t,localStorage.setItem("filters",JSON.stringify(n))}function x(){localStorage.setItem("filters",JSON.stringify({keyword:null,category:null,page:1,limit:6}))}function C(){return JSON.parse(localStorage.getItem("filters"))||x()}function oe(){i()}const m=document.querySelector(".popup"),se=document.querySelector(".products-container ");document.querySelector(".popup-close");se.addEventListener("click",ce);function ce(e){if(e.target===e.currentTarget)return;const t=e.target.closest(".list-item").id,n=document.getElementById(t);m.innerHTML=n.outerHTML,m.style.display="flex",document.addEventListener("keydown",o);function o(s){s.key==="Escape"&&(m.style.display="none",document.removeEventListener("keydown",o))}}const y=document.querySelectorAll(".popup-link"),f=document.querySelector("body"),l=document.querySelectorAll(".lock-padding");let u=!0;const k=800;if(y.length>0)for(let e=0;e<y.length;e++){const t=y[e];t.addEventListener("click",function(n){const o=t.getAttribute("href").replace("#",""),s=document.getElementById(o);A(s),n.preventDefault()})}const h=document.querySelectorAll(".close-popup");if(h.length>0)for(let e=0;e<h.length;e++){const t=h[e];t.addEventListener("click",function(n){p(t.closest(".popup")),n.preventDefault()})}function A(e){if(e&&u){const t=document.querySelector(".popup.open");t?p(t,!1):B(),e.classList.add("open"),e.addEventListener("click",function(n){n.target.closest(".popup-content")||p(n.target.closest(".popup"))})}}function p(e,t=!0){u&&(e.classList.remove("open"),t&&H())}function B(){const e=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px";if(l.length>0)for(let t=0;t<l.length;t++){const n=l[t];n.style.paddingRight=e}f.style.paddingRight=e,f.classList.add("lock"),u=!1,setTimeout(function(){u=!0},k)}function H(){setTimeout(function(){if(l.length>0)for(let e=0;e<l.length;e++){const t=l[e];t.style.paddingRight="0px"}f.style.paddingRight="0px",f.classList.remove("lock")},k),u=!1,setTimeout(function(){u=!0},k)}document.addEventListener("keydown",function(e){if(e.code==="Escape"){const t=document.querySelector(".popup.open");p(t)}});_();const re=document.querySelectorAll(".popup-link");A(re[0]);const ae=document.querySelector(".close-popup");p(ae.closest(".popup"));B();H();
//# sourceMappingURL=commonHelpers2.js.map
