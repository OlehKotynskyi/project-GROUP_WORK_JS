import{a as E,b as T,d as O}from"./assets/template-71ec6c1e.js";import{a as w}from"./assets/vendor-a61d8330.js";async function C(e,t,o,c,n){try{const s={keyword:t||"",category:e||"",page:o||1,limit:c||6};return n&&(s.sort=n),(await w({method:"get",url:"https://food-boutique.b.goit.study/api/products",params:s})).data.results}catch(s){return console.error("Error fetching products:",s),[]}}async function f(e){return(await w(`https://food-boutique.b.goit.study/api/products/${e}`)).data}const v="products in cart";function k(){const e=document.querySelector(".header-basket-counter"),t=JSON.parse(localStorage.getItem(v));t.length==null?e.textContent="0":e.textContent=`${t.length}`}const N=document.querySelector(".products-container"),M=document.querySelector(".popular-container"),A=document.querySelector(".discount-container"),u="products in cart";async function D(){try{const e=await C("Fresh_Produce");N.insertAdjacentHTML("beforeend",E(e)),k()}catch(e){console.log(e.message)}}D();async function B(){try{const e=await f("popular");M.insertAdjacentHTML("beforeend",T(e))}catch(e){console.log(e.message)}}B();async function H(){const e=await f("discount");A.insertAdjacentHTML("beforeend",O(e))}H();N.addEventListener("click",J);async function J(e){if(console.log(e.target.nodeName),console.log(e.target.className),e.target.nodeName==="BUTTON"||e.target.nodeName==="IMG"){const o=e.target.closest(".list-item").id;try{const c=await f(o),n=JSON.parse(localStorage.getItem(u))??[],s=n.findIndex(d=>d._id===o);s!==-1?n[s].quantity+=1:(c.quantity=1,n.push(c)),localStorage.setItem(u,JSON.stringify(n)),k()}catch(c){console.log(c.message)}return}}A.addEventListener("click",$);async function $(e){if(e.target.nodeName==="BUTTON"||e.target.nodeName==="IMG"||e.target.nodeName==="SPAN"){const o=e.target.closest(".discount-list-item").id;try{const c=await f(o),n=JSON.parse(localStorage.getItem(u))??[],s=n.findIndex(d=>d._id===o);s!==-1?n[s].quantity+=1:(c.quantity=1,n.push(c)),localStorage.setItem(u,JSON.stringify(n)),k()}catch(c){console.log(c.message)}}}let m=0;const L=60,h=document.querySelector(".header"),q=document.querySelector(".header-section"),l=()=>window.pageYOffset||document.documentElement.scrollTop,I=()=>h.classList.contains("hide");function R(){window.addEventListener("scroll",()=>{l()>m&&!I()&&l()>L?h.classList.add("hide"):l()<m&&I()&&h.classList.remove("hide"),l()>L?q.classList.add("scrolled"):q.classList.remove("scrolled"),m=l()})}const g=document.querySelectorAll(".popup-link"),p=document.querySelector("body"),r=document.querySelectorAll(".lock-padding");let a=!0;const S=800;if(g.length>0)for(let e=0;e<g.length;e++){const t=g[e];t.addEventListener("click",function(o){const c=t.getAttribute("href").replace("#",""),n=document.getElementById(c);b(n),o.preventDefault()})}const y=document.querySelectorAll(".close-popup");if(y.length>0)for(let e=0;e<y.length;e++){const t=y[e];t.addEventListener("click",function(o){i(t.closest(".popup")),o.preventDefault()})}function b(e){if(e&&a){const t=document.querySelector(".popup.open");t?i(t,!1):x(),e.classList.add("open"),e.addEventListener("click",function(o){o.target.closest(".popup-content")||i(o.target.closest(".popup"))})}}function i(e,t=!0){a&&(e.classList.remove("open"),t&&P())}function x(){const e=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px";if(r.length>0)for(let t=0;t<r.length;t++){const o=r[t];o.style.paddingRight=e}p.style.paddingRight=e,p.classList.add("lock"),a=!1,setTimeout(function(){a=!0},S)}function P(){setTimeout(function(){if(r.length>0)for(let e=0;e<r.length;e++){const t=r[e];t.style.paddingRight="0px"}p.style.paddingRight="0px",p.classList.remove("lock")},S),a=!1,setTimeout(function(){a=!0},S)}document.addEventListener("keydown",function(e){if(e.code==="Escape"){const t=document.querySelector(".popup.open");i(t)}});R();const j=document.querySelectorAll(".popup-link");b(j[0]);const U=document.querySelector(".close-popup");i(U.closest(".popup"));x();P();
//# sourceMappingURL=commonHelpers2.js.map
