import{a as v,b as I,d as N}from"./assets/template-71ec6c1e.js";import{a as w}from"./assets/vendor-a61d8330.js";async function T(e,t,o,c,n){try{const s={keyword:t||"",category:e||"",page:o||1,limit:c||6};return n&&(s.sort=n),(await w({method:"get",url:"https://food-boutique.b.goit.study/api/products",params:s})).data.results}catch(s){return console.error("Error fetching products:",s),[]}}async function y(e){return(await w(`https://food-boutique.b.goit.study/api/products/${e}`)).data}const C="products in cart";function b(){const e=document.querySelector(".header-basket-counter"),t=JSON.parse(localStorage.getItem(C));t.length==null?e.textContent="0":e.textContent=`${t.length}`}const A=document.querySelector(".products-container"),O=document.querySelector(".popular-container"),D=document.querySelector(".discount-container"),k="products in cart";async function H(){try{const e=await T("Fresh_Produce");A.insertAdjacentHTML("beforeend",v(e)),b()}catch(e){console.log(e.message)}}H();async function M(){try{const e=await y("popular");O.insertAdjacentHTML("beforeend",I(e))}catch(e){console.log(e.message)}}M();async function $(){const e=await y("discount");D.insertAdjacentHTML("beforeend",N(e))}$();A.addEventListener("click",R);async function R(e){if(console.log(e.target.nodeName),e.target.nodeName!=="BUTTON"&&e.target.nodeName!=="svg"&&e.target.nodeName!=="use")return;const o=e.target.closest(".list-item").id;console.log(o);try{const c=await y(o),n=JSON.parse(localStorage.getItem(k))??[];console.log(n);const s=n.findIndex(h=>h._id===o);console.log(s),s!==-1?n[s].quantity+=1:(c.quantity=1,n.push(c)),localStorage.setItem(k,JSON.stringify(n)),b()}catch(c){console.log(c.message)}}let u=0;const S=60,g=document.querySelector(".header"),L=document.querySelector(".header-section"),a=()=>window.pageYOffset||document.documentElement.scrollTop,q=()=>g.classList.contains("hide");function j(){window.addEventListener("scroll",()=>{a()>u&&!q()&&a()>S?g.classList.add("hide"):a()<u&&q()&&g.classList.remove("hide"),a()>S?L.classList.add("scrolled"):L.classList.remove("scrolled"),u=a()})}const p=document.querySelectorAll(".popup-link"),d=document.querySelector("body"),r=document.querySelectorAll(".lock-padding");let l=!0;const m=800;if(p.length>0)for(let e=0;e<p.length;e++){const t=p[e];t.addEventListener("click",function(o){const c=t.getAttribute("href").replace("#",""),n=document.getElementById(c);x(n),o.preventDefault()})}const f=document.querySelectorAll(".close-popup");if(f.length>0)for(let e=0;e<f.length;e++){const t=f[e];t.addEventListener("click",function(o){i(t.closest(".popup")),o.preventDefault()})}function x(e){if(e&&l){const t=document.querySelector(".popup.open");t?i(t,!1):E(),e.classList.add("open"),e.addEventListener("click",function(o){o.target.closest(".popup-content")||i(o.target.closest(".popup"))})}}function i(e,t=!0){l&&(e.classList.remove("open"),t&&P())}function E(){const e=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px";if(r.length>0)for(let t=0;t<r.length;t++){const o=r[t];o.style.paddingRight=e}d.style.paddingRight=e,d.classList.add("lock"),l=!1,setTimeout(function(){l=!0},m)}function P(){setTimeout(function(){if(r.length>0)for(let e=0;e<r.length;e++){const t=r[e];t.style.paddingRight="0px"}d.style.paddingRight="0px",d.classList.remove("lock")},m),l=!1,setTimeout(function(){l=!0},m)}document.addEventListener("keydown",function(e){if(e.code==="Escape"){const t=document.querySelector(".popup.open");i(t)}});j();const B=document.querySelectorAll(".popup-link");x(B[0]);const J=document.querySelector(".close-popup");i(J.closest(".popup"));E();P();
//# sourceMappingURL=commonHelpers2.js.map
