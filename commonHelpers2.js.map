{"version":3,"file":"commonHelpers2.js","sources":["../src/js/fetch.js","../src/js/products.js","../src/js/base-js/popup.js","../src/main.js"],"sourcesContent":["import axios from 'axios'\n\nexport async function fetchProductsAll(category, keyword, page, limit, sortMethod) {\n    try {\n        const params = {\n            keyword: keyword || '',\n            category: category || '',\n            page: page || 1,\n            limit: limit || 6\n        };\n\n        // Додаємо спосіб сортування до параметрів запиту, якщо він існує\n        if (sortMethod) {\n            params.sort = sortMethod;\n        }\n\n        const response = await axios({\n            method: 'get',\n            url: 'https://food-boutique.b.goit.study/api/products',\n            params: params\n        });\n        return response.data.results;\n    } catch (error) {\n        console.error('Error fetching products:', error);\n        return []; // повертаємо порожній масив у випадку помилки\n    }\n}\n\nexport async function fetchProducts(select) {\n    const response = await axios(`https://food-boutique.b.goit.study/api/products/${select}`)\n    return response.data\n}","import {\n  createMarkupProductsAll,\n  createMarkupPopularProducts,\n  createMarkupProductsDiscount,\n} from './template.js';\nimport { fetchProductsAll, fetchProducts } from './fetch.js';\nimport addCounter from './cart-header-counter.js';\n\nconst containerAll = document.querySelector('.products-container');\nconst containerPopular = document.querySelector('.popular-container');\nconst containerDiscount = document.querySelector('.discount-container');\n\nconst KEY = 'products in cart';\n\n// Функція для оновлення списку продуктів\nexport function updateProductsList(products) {\n  const container = document.querySelector('.products-container');\n  if (products.length === 0) {\n      container.innerHTML = `<p>Nothing was found for the selected filters...</p>\n                             <p>Try adjusting your search parameters or browse our range by other criteria to find the perfect product for you.</p>`;\n  } else {\n      container.innerHTML = createMarkupProductsAll(products);\n  }\n}\n\nasync function renderAll() {\n  try {\n    const data = await fetchProductsAll('Fresh_Produce');\n    containerAll.insertAdjacentHTML('beforeend', createMarkupProductsAll(data));\n    addCounter();\n  } catch (error) {\n    console.log(error.message);\n  }\n}\nrenderAll();\n\nexport async function renderPopular() {\n   try {\n     const data = await fetchProducts('popular');\n     const newData = removeUnderscores(data);\n \n     containerPopular.insertAdjacentHTML(\"beforeend\", createMarkupPopularProducts(newData));\n   } catch (error) {\n     console.error('Error fetching and rendering popular products:', error.message);\n   }\n }\n renderPopular();\n\nasync function renderDiscount() {\n  const data = await fetchProducts('discount');\n  containerDiscount.insertAdjacentHTML(\n    'beforeend',\n    createMarkupProductsDiscount(data)\n  );\n}\nrenderDiscount();\n\ncontainerAll.addEventListener('click', addBtnClick);\n\nasync function addBtnClick(event) {\n  console.log(event.target.nodeName);\n  console.log(event.target.className);\n  if (\n    event.target.nodeName === 'BUTTON' ||\n    event.target.nodeName === 'IMG'\n    //   && event.target.nodeName !== 'use'\n  ) {\n    //     return;\n    //   }\n    const selectedItem = event.target.closest('.list-item');\n\n    const selectedItemId = selectedItem.id;\n\n    try {\n      const currentProduct = await fetchProducts(selectedItemId);\n      const products = JSON.parse(localStorage.getItem(KEY)) ?? [];\n\n      const index = products.findIndex(item => item._id === selectedItemId);\n\n      if (index !== -1) {\n        products[index].quantity += 1;\n      } else {\n        currentProduct.quantity = 1;\n        products.push(currentProduct);\n      }\n      localStorage.setItem(KEY, JSON.stringify(products));\n      addCounter();\n    } catch (error) {\n      console.log(error.message);\n    }\n    return;\n  }\n}\n//===============================\ncontainerDiscount.addEventListener('click', addBtnClickDiscount);\n\nasync function addBtnClickDiscount(event) {\n  if (\n    event.target.nodeName === 'BUTTON' ||\n    event.target.nodeName === 'IMG' ||\n    event.target.nodeName === 'SPAN'\n  ) {\n    const selectedItem = event.target.closest('.discount-list-item');\n\n    const selectedItemId = selectedItem.id;\n\n    try {\n      const currentProduct = await fetchProducts(selectedItemId);\n      const products = JSON.parse(localStorage.getItem(KEY)) ?? [];\n\n      const index = products.findIndex(item => item._id === selectedItemId);\n\n      if (index !== -1) {\n        products[index].quantity += 1;\n      } else {\n        currentProduct.quantity = 1;\n        products.push(currentProduct);\n      }\n      localStorage.setItem(KEY, JSON.stringify(products));\n      addCounter();\n    } catch (error) {\n      console.log(error.message);\n    }\n  }\n  return;\n}\n\n//================================\n\n// Функція для видалення підкреслення між словами\nexport function removeUnderscores(arr) {\n   return arr.map(obj => {\n     let category = obj.category;\n     if (typeof category === 'string') {\n       category = category.split('_').join(' ');\n     }\n     return { ...obj, category };\n   });\n }\n","const popupLinks = document.querySelectorAll('.popup-link');\nconst body = document.querySelector('body');\nconst lockPadding = document.querySelectorAll(\".lock-padding\");\n\nlet unlock = true;\n\nconst timeout = 800;\n\nif (popupLinks.length > 0) {\n   for (let index = 0; index < popupLinks.length; index++) {\n      const popupLink = popupLinks[index];\n      popupLink.addEventListener(\"click\", function (e) {\n         const popupName = popupLink.getAttribute('href').replace('#', '');\n         const curentPopup = document.getElementById(popupName);\n         popupOpen(curentPopup);\n         e.preventDefault();\n      });\n   }\n}\nconst popupCloseIcon = document.querySelectorAll('.close-popup');\nif (popupCloseIcon.length > 0) {\n   for (let index = 0; index < popupCloseIcon.length; index++) {\n      const el = popupCloseIcon[index];\n      el.addEventListener('click', function (e) {\n         popupClose(el.closest('.popup'));\n         e.preventDefault();\n      });\n   }\n}\n\nexport function popupOpen(curentPopup) {\n   if (curentPopup && unlock) {\n      const popupActive = document.querySelector('.popup.open');\n      if (popupActive) {\n         popupClose(popupActive, false);\n      } else {\n         bodyLock();\n      }\n      curentPopup.classList.add('open');\n      curentPopup.addEventListener(\"click\", function (e) {\n         if (!e.target.closest('.popup-content')) {\n            popupClose(e.target.closest('.popup'));\n         }\n      });\n   }\n}\n\nexport function popupClose(popupActive, doUnlock = true) {\n   if (unlock) {\n      popupActive.classList.remove('open');\n      if (doUnlock) {\n         bodyUnLock();\n      }\n   }\n}\n\nexport function bodyLock() {\n   const lockPaddingValue = window.innerWidth - document.querySelector('.wrapper').offsetWidth + 'px';\n\n   if (lockPadding.length > 0) {\n      for (let index = 0; index < lockPadding.length; index++) {\n         const el = lockPadding[index];\n         el.style.paddingRight = lockPaddingValue;\n      }\n   }\n   body.style.paddingRight = lockPaddingValue;\n   body.classList.add('lock');\n\n   unlock = false;\n   setTimeout(function () {\n      unlock = true;\n   }, timeout);\n}\n\nexport function bodyUnLock() {\n   setTimeout(function () {\n      if (lockPadding.length > 0) {\n         for (let index = 0; index < lockPadding.length; index++) {\n            const el = lockPadding[index];\n            el.style.paddingRight = '0px';\n         }\n      }\n      body.style.paddingRight = '0px';\n      body.classList.remove('lock');\n   }, timeout);\n\n   unlock = false;\n   setTimeout(function () {\n      unlock = true;\n   }, timeout);\n}\n\ndocument.addEventListener('keydown', function (e) {\n   if (e.code === 'Escape') {\n      const popupActive = document.querySelector('.popup.open');\n      popupClose(popupActive);\n   }\n});\n\n\n\n","// Експорт функції шапки сайту ховати при прокрутці та показувати \nimport { handleHeaderScroll } from './js/base-js/scroll';\n// Експорт функції попапу\nimport * as yourModule from './js/base-js/popup';\n\n// визов функції ховати та показувати шапку сайту\nhandleHeaderScroll();\n\n// визов функціоналу попапа\nconst popupLinks = document.querySelectorAll('.popup-link');\n// визов функції відкриття першого попапу\nyourModule.popupOpen(popupLinks[0]);\n//визов функції закриття попапу\nconst popupCloseIcon = document.querySelector('.close-popup');\nyourModule.popupClose(popupCloseIcon.closest('.popup'));\n// визов функції блокування скролу в боді\nyourModule.bodyLock();\n// визов функції розблокування скролу боді\nyourModule.bodyUnLock();\n\n\n"],"names":["fetchProductsAll","category","keyword","page","limit","sortMethod","params","axios","error","fetchProducts","select","containerAll","containerPopular","containerDiscount","KEY","renderAll","data","createMarkupProductsAll","addCounter","renderPopular","newData","removeUnderscores","createMarkupPopularProducts","renderDiscount","createMarkupProductsDiscount","addBtnClick","event","selectedItemId","currentProduct","products","index","item","addBtnClickDiscount","arr","obj","popupLinks","body","lockPadding","unlock","timeout","popupLink","e","popupName","curentPopup","popupOpen","popupCloseIcon","el","popupClose","popupActive","bodyLock","doUnlock","bodyUnLock","lockPaddingValue","handleHeaderScroll","yourModule.popupOpen","yourModule.popupClose","yourModule.bodyLock","yourModule.bodyUnLock"],"mappings":"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"}