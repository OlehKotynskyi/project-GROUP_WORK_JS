{"version":3,"file":"commonHelpers2.js","sources":["../src/js/fetch.js","../src/js/products.js","../src/js/filters.js","../src/js/popap.js","../src/js/base-js/popup.js","../src/main.js"],"sourcesContent":["import axios from 'axios'\n\nexport async function fetchProductsAll(category, keyword, page, limit, sortMethod) {\n    try {\n        const params = {\n            keyword: keyword || '',\n            category: category || '',\n            page: page || 1,\n            limit: limit || 6\n        };\n\n        // Додаємо спосіб сортування до параметрів запиту, якщо він існує\n        if (sortMethod) {\n            params.sort = sortMethod;\n        }\n\n        const response = await axios({\n            method: 'get',\n            url: 'https://food-boutique.b.goit.study/api/products',\n            params: params\n        });\n        return response.data.results;\n    } catch (error) {\n        console.error('Error fetching products:', error);\n        return []; // повертаємо порожній масив у випадку помилки\n    }\n}\n\nexport async function fetchProducts(select) {\n    const response = await axios(`https://food-boutique.b.goit.study/api/products/${select}`)\n    return response.data\n}","import {\n  createMarkupProductsAll,\n  createMarkupPopularProducts,\n  createMarkupProductsDiscount,\n} from './template.js';\nimport { fetchProductsAll, fetchProducts } from './fetch.js';\nimport addCounter from './cart-header-counter.js';\n\nconst containerAll = document.querySelector('.products-container');\nconst containerPopular = document.querySelector('.popular-container');\nconst containerDiscount = document.querySelector('.discount-container');\n\nconst KEY = 'products in cart';\n\n// Функція для оновлення списку продуктів\nexport function updateProductsList(products) {\n   const container = document.querySelector('.products-container');\n   // Перевіряємо, що products не є null і має властивість length\n   if (!products || products.length === 0) {\n       container.innerHTML = `<p>Nothing was found for the selected filters...</p>\n                              <p>Try adjusting your search parameters or browse our range by other criteria to find the perfect product for you.</p>`;\n   } else {\n       container.innerHTML = createMarkupProductsAll(removeUnderscores(products));\n   }\n }\n export function getProductsLimit() {\n   const screenWidth = window.innerWidth;\n   if (screenWidth < 375) { // Мобільні пристрої\n       return 6;\n   } else if (screenWidth >= 375 && screenWidth < 768) { // Таблет\n       return 8;\n   } else { // Десктоп і вище\n       return 9;\n   }\n }\n\n\nasync function renderAll() {\n  try {\n    const data = await fetchProductsAll('Fresh_Produce');\n    containerAll.insertAdjacentHTML(\n      'beforeend',\n      createMarkupProductsAll(removeUnderscores(data))\n    );\n    addCounter();\n  } catch (error) {\n    console.log(error.message);\n  }\n}\nrenderAll();\n\n// перемішування масиву та вибору випадкових продуктів\nfunction shuffleArray(array) {\n   for (let i = array.length - 1; i > 0; i--) {\n       const j = Math.floor(Math.random() * (i + 1));\n       [array[i], array[j]] = [array[j], array[i]]; // Перемішування елементів\n   }\n}\n\nfunction getRandomProducts(products, count) {\n   shuffleArray(products);\n   return products.slice(0, count);\n}\n\nasync function renderPopular() {\n   try {\n      const data = await fetchProducts('popular');\n      const randomData = getRandomProducts(data, 5); // Вибірка 5 випадкових продуктів\n      containerPopular.innerHTML = createMarkupPopularProducts(randomData);\n  } catch (error) {\n       console.log(error.message);\n      }\n}\n\nrenderPopular()\n\nasync function renderDiscount() {\n   try {\n      const data = await fetchProducts('discount');\n      const randomData = getRandomProducts(data, 2); // Вибірка 2 випадкових продуктів\n      containerDiscount.innerHTML = createMarkupProductsDiscount(randomData);\n  } catch (error) {\n       console.log(error.message);\n       }\n\n}\n\nrenderDiscount();\n\ncontainerAll.addEventListener('click', addBtnClick);\n\nasync function addBtnClick(event) {\n  console.log(event.target.nodeName);\n  console.log(event.target.className);\n  if (\n    event.target.className === 'add-btn' ||\n    event.target.nodeName === 'IMG'\n    //   && event.target.nodeName !== 'use'\n  ) {\n    //     return;\n    //   }\n\n    const selectedItem = event.target.closest('.list-item');\n\n    const selectedItemId = selectedItem.id;\n\n    try {\n      const currentProduct = await fetchProducts(selectedItemId);\n      const products = JSON.parse(localStorage.getItem(KEY)) ?? [];\n\n      const index = products.findIndex(item => item._id === selectedItemId);\n\n      if (index !== -1) {\n        products[index].quantity += 1;\n      } else {\n        currentProduct.quantity = 1;\n        products.push(currentProduct);\n      }\n      localStorage.setItem(KEY, JSON.stringify(products));\n      addCounter();\n    } catch (error) {\n      console.log(error.message);\n    }\n    return;\n  }\n}\n\ncontainerDiscount.addEventListener('click', addBtnClickDiscount);\n\nasync function addBtnClickDiscount(event) {\n  if (\n    event.target.nodeName === 'BUTTON' ||\n    event.target.nodeName === 'IMG' ||\n    event.target.nodeName === 'SPAN'\n  ) {\n    console.dir(event.target.className);\n    const selectedItem = event.target.closest('.discount-list-item');\n\n    const selectedItemId = selectedItem.id;\n\n    try {\n      const currentProduct = await fetchProducts(selectedItemId);\n      const products = JSON.parse(localStorage.getItem(KEY)) ?? [];\n\n      const index = products.findIndex(item => item._id === selectedItemId);\n\n      if (index !== -1) {\n        products[index].quantity += 1;\n      } else {\n        currentProduct.quantity = 1;\n        products.push(currentProduct);\n      }\n      localStorage.setItem(KEY, JSON.stringify(products));\n      addCounter();\n    } catch (error) {\n      console.log(error.message);\n    }\n  }\n  return;\n}\n\n\n// Функція для видалення підкреслення між словами\nexport function removeUnderscores(arr) {\n   return arr.map(obj => {\n     let category = obj.category;\n     if (typeof category === 'string') {\n       category = category.split('_').join(' ');\n     }\n     return { ...obj, category };\n   });\n }\n\n","// filters.js\n\nimport { fetchProductsAll } from './fetch.js';\nimport { updateProductsList } from './products.js';\nimport { getProductsLimit } from './products.js';\n\n\ndocument.addEventListener('DOMContentLoaded', function () {\n    initializeFilters();\n    fetchCategories();\n    setupEventListeners();\n    fetchInitialProducts();\n});\n\nwindow.addEventListener('resize', () => {\n    fetchFilteredProducts(); // Перезавантаження продуктів\n});\n\nasync function fetchCategories() {\n    try {\n        const response = await fetch('https://food-boutique.b.goit.study/api/products/categories');\n        const categories = await response.json();\n        populateCategorySelect(categories);\n    } catch (error) {\n        console.error('Error fetching categories:', error);\n    }\n}\n\nfunction populateCategorySelect(categories) {\n    const select = document.getElementById('categories');\n    // Додаємо опцію \"Show all\"\n    select.appendChild(new Option(\"Show all\", \"\"));\n\n    categories.forEach(category => {\n        const option = document.createElement('option');\n        option.value = category;\n        option.textContent = category.replace(/_/g, ' ');\n        select.appendChild(option);\n    });\n\n    const savedFilters = getSavedFilters();\n    if (savedFilters.category) {\n        select.value = savedFilters.category;\n    }\n}\n\nfunction setupEventListeners() {\n    const searchForm = document.querySelector('.search-form');\n    const categoriesSelect = document.getElementById('categories');\n\n    searchForm.addEventListener('submit', function (e) {\n        e.preventDefault();\n        const keyword = document.getElementById('search-box').value;\n        updateFilters('keyword', keyword);\n        fetchFilteredProducts();\n    });\n\n    categoriesSelect.addEventListener('change', function () {\n        updateFilters('category', this.value);\n        fetchFilteredProducts();\n    });\n}\n\n// Додаткова функція для скидання сторінки на 1\nfunction resetPage() {\n    updateFilters('page', 1);\n}\n\nasync function fetchFilteredProducts() {\n    const filters = getSavedFilters();\n    const limit = getProductsLimit();\n\n    try {\n        // Відправка запиту з включенням обраних ключового слова і категорії\n        const products = await fetchProductsAll(filters.category, filters.keyword, filters.page, limit);\n        updateProductsList(products);\n    } catch (error) {\n        console.error('Error fetching products:', error);\n        updateProductsList([]);\n    }\n}\n\nfunction initializeFilters() {\n    if (!localStorage.getItem('filters')) {\n        resetFilters();\n    }\n}\n\nfunction updateFilters(key, value) {\n    const filters = getSavedFilters();\n    filters[key] = value;\n    localStorage.setItem('filters', JSON.stringify(filters));\n}\n\nfunction resetFilters() {\n    localStorage.setItem('filters', JSON.stringify({ keyword: null, category: null, page: 1, limit: 6 }));\n}\n\nfunction getSavedFilters() {\n    return JSON.parse(localStorage.getItem('filters')) || resetFilters();\n}\n\nfunction fetchInitialProducts() {\n    fetchFilteredProducts();\n}\n\n//import { fetchProductsAll } from './fetch.js';\n//import { updateProductsList } from './products.js';\n\n\n//document.addEventListener('DOMContentLoaded', function () {\n//    initializeFilters();\n//    fetchCategories();\n//    setupEventListeners();\n//    fetchInitialProducts();\n//});\n\n//async function fetchCategories() {\n//    try {\n//        const response = await fetch('https://food-boutique.b.goit.study/api/products/categories');\n//        const categories = await response.json();\n//        populateCategorySelect(categories);\n//    } catch (error) {\n//        console.error('Error fetching categories:', error);\n//    }\n//}\n\n//function populateCategorySelect(categories) {\n//    const select = document.getElementById('categories');\n//    // Додаємо опцію \"Show all\"\n//    select.appendChild(new Option(\"Show all\", \"\"));\n\n//    categories.forEach(category => {\n//        const option = document.createElement('option');\n//        option.value = category;\n//        option.textContent = category.replace(/_/g, ' ');\n//        select.appendChild(option);\n//    });\n\n//    const savedFilters = getSavedFilters();\n//    if (savedFilters.category) {\n//        select.value = savedFilters.category;\n//    }\n//}\n\n//function setupEventListeners() {\n//    const searchForm = document.querySelector('.search-form');\n//    const categoriesSelect = document.getElementById('categories');\n\n//    searchForm.addEventListener('submit', function (e) {\n//        e.preventDefault();\n//        const keyword = document.getElementById('search-box').value;\n//        updateFilters('keyword', keyword);\n//        fetchFilteredProducts();\n//    });\n\n//    categoriesSelect.addEventListener('change', function () {\n//        updateFilters('category', this.value);\n//        fetchFilteredProducts();\n//    });\n//}\n\n//// Додаткова функція для скидання сторінки на 1\n//function resetPage() {\n//    updateFilters('page', 1);\n//}\n\n//async function fetchFilteredProducts() {\n//    const filters = getSavedFilters();\n//    try {\n//        const products = await fetchProductsAll(filters.category, filters.keyword, filters.page, filters.limit);\n//        updateProductsList(products);\n//    } catch (error) {\n//        console.error('Error fetching products:', error);\n//        updateProductsList([]);\n//    }\n//}\n\n//function initializeFilters() {\n//    if (!localStorage.getItem('filters')) {\n//        resetFilters();\n//    }\n//}\n\n//function updateFilters(key, value) {\n//    const filters = getSavedFilters();\n//    filters[key] = value;\n//    localStorage.setItem('filters', JSON.stringify(filters));\n//}\n\n//function resetFilters() {\n//    localStorage.setItem('filters', JSON.stringify({ keyword: null, category: null, page: 1, limit: 6 }));\n//}\n\n//function getSavedFilters() {\n//    return JSON.parse(localStorage.getItem('filters')) || resetFilters();\n//}\n\n//function fetchInitialProducts() {\n//    fetchFilteredProducts();\n//}\n\n\n","import{createMarkupModal} from './template'\n\n// console.log(5); //то була перевірка чи працює файл\nconst container = document.querySelector(\".popup\");\nconst item = document.querySelector(\".products-container \");\nconst close = document.querySelector(\".popup-close\");\nitem.addEventListener(\"click\", handleClick);\nfunction handleClick(event) {\n    // console.log(event.target);\n    if (event.target === event.currentTarget) {\n        return\n    }\n\n    const itemId = event.target.closest('.list-item').id;\n    const itemElement = document.getElementById(itemId);\n    container.innerHTML = itemElement.outerHTML;\n\n    // const modalContent = createMarkupModal();\n    // container.innerHTML = modalContent;\n    container.style.display = 'flex';\n\n    document.addEventListener(\"keydown\", handleClickClose);\n    function handleClickClose(event) {\n        if (event.key === \"Escape\" ) {\n            container.style.display = 'none';\n            document.removeEventListener(\"keydown\", handleClickClose);\n        }\n    }\n}\n\n// я намагалась додати таким способом /1\n\n// const refs = {\n//     popupCart: document.querySelector('.popup-cart'),\n//     closeBtn: document.querySelector('.popup-cart-close-btn'),\n//  };\n \n//  refs.closeBtn.addEventListener('click', closeModal);\n \n//  function closeModal() {\n//     refs.popupCart.classList.add('is-hidden');\n//     window.removeEventListener('keydown', closeByEscape);\n//   }\n\n\n\n  \n//  чи ось так/2\n\n//   function closeModal() {\n//     modal.classList.remove('active');\n//     overlay.classList.remove('active');\n//     document.body.style.overflow = '';\n//   }\n//   closeBtn.addEventListener('click', closeModal);\n  \n  \n//   document.addEventListener('keydown', (e) => {\n//     if (e.key === \"Escape\") {\n//       closeModal(); \n//     }\n//   })\n  \n//   overlay.addEventListener('click', () =>  {\n//       closeModal();\n//     });","const popupLinks = document.querySelectorAll('.popup-link');\nconst body = document.querySelector('body');\nconst lockPadding = document.querySelectorAll(\".lock-padding\");\n\nlet unlock = true;\n\nconst timeout = 800;\n\nif (popupLinks.length > 0) {\n   for (let index = 0; index < popupLinks.length; index++) {\n      const popupLink = popupLinks[index];\n      popupLink.addEventListener(\"click\", function (e) {\n         const popupName = popupLink.getAttribute('href').replace('#', '');\n         const curentPopup = document.getElementById(popupName);\n         popupOpen(curentPopup);\n         e.preventDefault();\n      });\n   }\n}\nconst popupCloseIcon = document.querySelectorAll('.close-popup');\nif (popupCloseIcon.length > 0) {\n   for (let index = 0; index < popupCloseIcon.length; index++) {\n      const el = popupCloseIcon[index];\n      el.addEventListener('click', function (e) {\n         popupClose(el.closest('.popup'));\n         e.preventDefault();\n      });\n   }\n}\n\nexport function popupOpen(curentPopup) {\n   if (curentPopup && unlock) {\n      const popupActive = document.querySelector('.popup.open');\n      if (popupActive) {\n         popupClose(popupActive, false);\n      } else {\n         bodyLock();\n      }\n      curentPopup.classList.add('open');\n      curentPopup.addEventListener(\"click\", function (e) {\n         if (!e.target.closest('.popup-content')) {\n            popupClose(e.target.closest('.popup'));\n         }\n      });\n   }\n}\n\nexport function popupClose(popupActive, doUnlock = true) {\n   if (unlock) {\n      popupActive.classList.remove('open');\n      if (doUnlock) {\n         bodyUnLock();\n      }\n   }\n}\n\nexport function bodyLock() {\n   const lockPaddingValue = window.innerWidth - document.querySelector('.wrapper').offsetWidth + 'px';\n\n   if (lockPadding.length > 0) {\n      for (let index = 0; index < lockPadding.length; index++) {\n         const el = lockPadding[index];\n         el.style.paddingRight = lockPaddingValue;\n      }\n   }\n   body.style.paddingRight = lockPaddingValue;\n   body.classList.add('lock');\n\n   unlock = false;\n   setTimeout(function () {\n      unlock = true;\n   }, timeout);\n}\n\nexport function bodyUnLock() {\n   setTimeout(function () {\n      if (lockPadding.length > 0) {\n         for (let index = 0; index < lockPadding.length; index++) {\n            const el = lockPadding[index];\n            el.style.paddingRight = '0px';\n         }\n      }\n      body.style.paddingRight = '0px';\n      body.classList.remove('lock');\n   }, timeout);\n\n   unlock = false;\n   setTimeout(function () {\n      unlock = true;\n   }, timeout);\n}\n\ndocument.addEventListener('keydown', function (e) {\n   if (e.code === 'Escape') {\n      const popupActive = document.querySelector('.popup.open');\n      popupClose(popupActive);\n   }\n});\n\n\n\n\n\n","// Експорт функції шапки сайту ховати при прокрутці та показувати \nimport { handleHeaderScroll } from './js/base-js/scroll';\n// Експорт функції попапу\nimport * as yourModule from './js/base-js/popup';\n\n// визов функції ховати та показувати шапку сайту\nhandleHeaderScroll();\n\n// визов функціоналу попапа\nconst popupLinks = document.querySelectorAll('.popup-link');\n// визов функції відкриття першого попапу\nyourModule.popupOpen(popupLinks[0]);\n//визов функції закриття попапу\nconst popupCloseIcon = document.querySelector('.close-popup');\nyourModule.popupClose(popupCloseIcon.closest('.popup'));\n// визов функції блокування скролу в боді\nyourModule.bodyLock();\n// визов функції розблокування скролу боді\nyourModule.bodyUnLock();\n\n\n"],"names":["fetchProductsAll","category","keyword","page","limit","sortMethod","params","axios","error","fetchProducts","select","containerAll","containerPopular","containerDiscount","KEY","updateProductsList","products","container","createMarkupProductsAll","removeUnderscores","getProductsLimit","screenWidth","renderAll","data","addCounter","shuffleArray","array","i","j","getRandomProducts","count","renderPopular","randomData","createMarkupPopularProducts","renderDiscount","createMarkupProductsDiscount","addBtnClick","event","selectedItemId","currentProduct","index","item","addBtnClickDiscount","arr","obj","initializeFilters","fetchCategories","setupEventListeners","fetchInitialProducts","fetchFilteredProducts","categories","populateCategorySelect","option","savedFilters","getSavedFilters","searchForm","categoriesSelect","e","updateFilters","filters","resetFilters","key","value","handleClick","itemId","itemElement","handleClickClose","popupLinks","body","lockPadding","unlock","timeout","popupLink","popupName","curentPopup","popupOpen","popupCloseIcon","el","popupClose","popupActive","bodyLock","doUnlock","bodyUnLock","lockPaddingValue","handleHeaderScroll","yourModule.popupOpen","yourModule.popupClose","yourModule.bodyLock","yourModule.bodyUnLock"],"mappings":"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"}